# The format of this file is YAML, here is a brief overview:
#
#   https://de.wikipedia.org/wiki/YAML
#
# The generated pages will be available here
#
#   https://www.bos-schweiz.ch/raisenow-forms/index.html
#
# Processing changes takes (at time of writing) approx. 20 seconds.
#
# Some docu can be found here
#
#   https://support.raisenow.com/hc/de/articles/360011968358-Anpassen-der-Konfiguration-Sprache-und-Bedingungen
#
---
features:
  production: &PRODUCTION
    testMode: false

  debugging: &DEBUGGING
    debug: true
    debugErrorMessages: true
    debugSlots: true
    debugStyles: true
    testMode: true

  # -- translations

  translations-1: &TRANSLATIONS-1
    de:
      blocks:
        payment_address:
          title: Adresse angeben (für Zahlung und ggf. Versand der Urkunde)
        slot_1:
          title: Urkunde wählen
      payment_form:
        stored_customer_certificates:
          grasspaper: Mit Graspapier Urkunde (7 CHF)
          digital: Mit digitaler Urkunde (2 CHF)
          none: Ohne Urkunde

  translations-2: &TRANSLATIONS-2
    de:
      purposes:
        s1: Freie Spende
        s2: Aufforstung
        s3: Rettungsstationen
        s4: Auswilderungen
        s5: Bären
        s6: Waldschutz
        s7: Bäume spenden
        s8: Bäume schenken
        s9: BOS Schweiz Bildungsprogramm
        s10: Kondolenz-Spende
        s11: Fördermitgliedschaft
        s12: Besondere Spendenaktion
        s13: Milchfläschchen
        s14: Gemüse- und Früchtekorb
        s15: Spielzeug
        s16: Schubkarren
        s17: Versorgung Auswilderung
        s18: Medikamente
        s19: Warenbestellung
        s20: Waldschutz
        p1: Patenschaft für die Rettungsstationen
        p2: Patenschaft für Topan  # nicht mehr in der Auswahl!
        p3: Patenschaft für Bumi
        # p4: Patenschaft für Davi
        p4: Patenschaft für Baimah
        p5: Patenschaft für Kopral
        p6: Patenschaft für Shelton # nicht mehr in der Auswahl!
        p7: Patenschaft für Jeni
        p8: Patenschaft für Iqo
      payment_profile:
        donation_receipt_info_html: >-
          <p>Der Versand einer Spendenbescheinigung erfordert die Eingabe der Postadresse.</p>
      info_toggle:
        stored_customer_birthdate:
          text_html: >-
            BOS Schweiz bietet unter 18-Jährigen Patenschaften zum
            ermässigten Preis. Aus diesem Grund bitten wir um eine
            Altersangabe in Form des Geburtsdatums. Zudem ermöglicht
            diese Angabe das Versenden eines Geburtstagsgrusses.
        # this is theoretically the right place if RaiseNow supports it
        stored_recipient_email:
          text_html: >-
            Für Updates und so. Bitte ändere mich.
      payment_form:
        stored_customer_phone: Telefonnummer
        stored_customer_info_text_long: >-
          <p style="padding: 1rem; font-size: 80%; border: thin
          solid lightgray">Die Übermittlung der Daten erfolgt
          verschlüsselt. BOS Schweiz speichert selbst keine
          Kartendaten, Ihre Zahlungsdaten laufen direkt über
          RaiseNow, einem von der Kreditkartenindustrie (PCI DSS)
          zertifizierten Partner. Unsere Dienstleistenden dürfen die
          Informationen ausschliesslich zur Erfüllung ihrer Aufgaben
          nutzen und sind verpflichtet, die Datenschutzbestimmungen
          einzuhalten. Sie können Ihre Spende in der Schweiz von
          Ihrem steuerbaren Einkommen abziehen. Spender*innen in der
          Schweiz erhalten per Post oder E-Mail eine
          Spendenbestätigung für die Steuerbehörden. Die Spenden
          gehen an BOS Schweiz. <a
          href='https://www.bos-schweiz.ch/de/ueber-bos/datenschutz-bei-bos.htm'>Datenschutzbestimmungen
          von BOS Schweiz</a></p>
        salutations:
          neutral: Neutrale Anrede
      validation_errors:
        amount:
          minimum_custom_amount: Bitte einen Betrag über {{min}} eingeben

  translations-3: &TRANSLATIONS-3
    de:
      amount_descriptions: "einen symbolischen Stutz, mehr nicht"
      blocks:
        slot_1:
          title: Urkunde wählen
      payment_form:
        stored_customer_certificates:
          digital: Mit digitaler Urkunde
          none: Ohne Urkunde
        stored_recipient_firstname: Name auf der Urkunde
        stored_customer_map_label: Name Ihres Waldes auf der Karte
        stored_customer_map_label_info_text_long: >-
          <p style="padding: 1rem; font-size: 80%; border: thin
          solid lightgray">Max. 10 Zeichen können angezeigt werden. Die Sichtbarkeit
          Ihrer Benennung auf der Karte ist zeitlich begrenzt.</p>

  translations-4: &TRANSLATIONS-4
    de:
      amount_descriptions:
        - {if: 'amount() == 40', then:  [1 ha Wald schützen]}
        - {if: 'amount() == 80', then:  [2 ha Wald schützen]}
        - {if: 'amount() == 120', then: [3 ha Wald schützen]}
        - {if: 'amount() == 200', then: [5 ha Wald schützen]}
      payment_form:
        stored_customer_map_label_info_text_long: >-
          <p style="padding: 1rem; font-size: 80%; border: thin
          solid lightgray">Max. 10 Zeichen können angezeigt werden.</p>

  translations-5: &TRANSLATIONS-5
    de:
      amount_descriptions:
        - { if: 'amount() == 60', then:  [ Einzelperson ] }
        - { if: 'amount() == 120', then:  [ Familie ] }
        - { if: 'amount() == 300', then:  [ Juristische Person ] }
      # payment_form:
      #   supscription_cancelation_policy: >-
      #     Ihr Mitgliedsbeitrag wird jährlich fällig. Sie können Ihre
      #     Mitgliedschaft jederzeit beenden.
      blocks:
        payment_amounts_and_intervals:
          title: Art der Mitgliedschaft wählen
          payment_types:
            selected_interval_label:
              yearly: >-
                Hinweis: Ihr Mitgliedsbeitrag wird jährlich fällig.
                Sie können Ihre Mitgliedschaft jederzeit beenden.
      # payment_form:
      #   supscription_cancelation_policy: >-
      #     hello world 2

  translations-6: &TRANSLATIONS-6
    de:
      amount_descriptions: &SPENDE_BAEUME_TRANSLATIONS_AMOUNTDESCRIPTIONS
        - {if: 'amount() == 7.65', then: [1 Baum inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 38.25', then: [5 Bäume inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 76.5', then: [10 Bäume inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 191.25', then: [25 Bäume inkl. 5 Jahre Pflege]}
        # s8: digital
        - {if: 'amount() == 9.65', then: [1 Baum inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 40.25', then: [5 Bäume inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 78.5', then: [10 Bäume inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 193.25', then: [25 Bäume inkl. 5 Jahre Pflege]}
        # s7: grasspaper
        - {if: 'amount() == 14.65', then: [1 Baum inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 45.25', then: [5 Bäume inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 83.5', then: [10 Bäume inkl. 5 Jahre Pflege]}
        - {if: 'amount() == 198.25', then: [25 Bäume inkl. 5 Jahre Pflege]}
      blocks:
        payment_address:
          title: Adresse angeben (für Zahlung und ggf. Versand der Urkunde)
        slot_1:
          title: Urkunde wählen
      payment_form:
        stored_customer_certificates:
          grasspaper: Mit Graspapier Urkunde (7 CHF)
          digital: Mit digitaler Urkunde (2 CHF)
          none: Ohne Urkunde

  translations-7: &TRANSLATIONS-7
    de:
      blocks:
        payment_purposes:
          title: Hilfspakete wählen

  translations-8: &TRANSLATIONS-8
    de:
      payment_form:
        stored_customer_subject: Name der/des Verstorbenen
      validation_errors:
        stored_customer_subject:
          field_is_missing: Für die Zuordnung Ihrer Spende benötigen wir einen Namen

  translations-9: &TRANSLATIONS-9
      de:
        payment_form:
          stored_customer_subject: Details zum Spendenaufruf
          stored_customer_subject_placeholder: z.B. Geburtstag Hans Muster
        validation_errors:
          stored_customer_subject:
            field_is_missing: Für die Zuordnung Ihrer Spende benötigen wir einen Namen

  translations-10: &TRANSLATIONS-10
    de:
      amount_descriptions:
        - if: 'paymentType() == recurring and recurringInterval() == monthly and amount() == 25'
          then: [Normalpreis]
        - if: 'amount() == 300'
          then: [Normalpreis]
        - if: 'amount() == custom_amount'
          then: ['']
        - Ermässigt für Kinder
      payment_form:
        stored_customer_delivery: Versand
        stored_customer_deliveries:
          customer: Versand an mich
          recipient: Versand an beschenkte Person
        stored_recipient_salutation_label: Anrede
      blocks:
        payment_profile:
          title: Personalien angeben (für Patenurkunde und -update)
        payment_address:
          title: Adresse angeben (für den Versand der Patenurkunde)
      payment_submit:
        submit: Patenschaftsbeitrag sicher übermitteln

  translations-11: &TRANSLATIONS-11
    de:
      payment_form:
        stored_recipient_email: E-Mail (optional)
        stored_recipient_birthdate: Geburtsdatum
        stored_recipient_birthdate_info_bubble_html: >-
           BOS Schweiz bietet unter 18-Jährigen Patenschaften zum
           ermässigten Preis. Aus diesem Grund bitten wir um eine
           Altersangabe in Form des Geburtsdatums. Zudem ermöglicht
           diese Angabe das Versenden eines Geburtstagsgrusses.
      blocks:
        payment_amounts_and_intervals:
          title: Betrag der Spende wählen
        payment_profile:
          title: Personalien der schenkenden Person (für Zahlung, Rückfragen und Updates)
        payment_address:
          title: Adresse der schenkenden Person (für Zahlung)
        slot_2:
          title: Versand der Urkunde
        slot_3:
          title: Name der beschenkten Person auf der Urkunde
        slot_4:
          title: Adresse der beschenkten Person
      validation_errors:
        stored_customer_delivery:       {field_is_missing: Bitte eine Option wählen}
        stored_recipient_salutation:    {field_is_missing: Bitte Anrede auswählen}
        stored_recipient_firstname:     {field_is_missing: Bitte Vorname angeben}
        stored_recipient_lastname:      {field_is_missing: Bitte Nachname angeben}
        stored_recipient_email:         {field_is_missing: Bitte Emailadresse angeben}
        stored_recipient_street:        {field_is_missing: Bitte Strasse angeben}
        stored_recipient_street_number: {field_is_missing: Bitte Hausnummer angeben}
        stored_recipient_zip_code:      {field_is_missing: Bitte Postleitzahl angeben}
        stored_recipient_city:          {field_is_missing: Bitte Ort angeben}
        stored_recipient_country:       {field_is_missing: Bitte Land auswählen}

  translations-12: &TRANSLATIONS-12
    de:
      amount_descriptions: []
      blocks:
        payment_purposes:
          title: Hilfspakete wählen

  translations-13: &TRANSLATIONS-13
    de:
      amount_descriptions: *SPENDE_BAEUME_TRANSLATIONS_AMOUNTDESCRIPTIONS

  translations-14: &TRANSLATIONS-14
    de:
      blocks:
        # this does not work with `paymentTypes: [ onetime ]`
        payment_amounts_and_intervals:
          title: "Bestellwert inkl. Versand"
        payment_purposes:
          title: Zweck

  # --- end of translations

  two-options-certificate: &TWO-OPTIONS-CERTIFICATE
    # newschool
    showBlocks:
      payment_purposes: true
      slot_1: true
      payment_amounts_and_intervals: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
    # oldschool
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - slot_1
    #   - payment_amounts_and_intervals
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    paymentFormPrefill:
      stored_customer_certificate: grasspaper
    amounts: &SPENDE_BAEUME_AMOUNTS
      - if: paymentForm(stored_customer_certificate) == grasspaper
        then: [14.65, 45.25, 83.50, 198.25]
      - if: paymentForm(stored_customer_certificate) == digital
        then: [9.65, 40.25, 78.50, 193.25]
      - if: paymentForm(stored_customer_certificate) == none
        then: [7.65, 38.25, 76.50, 191.25]
    # minimumCustomAmount: &SPENDE_BAEUME_MINIMUMCUSTOMAMOUNTS
    #   - {if: 'paymentForm(stored_customer_certificate) == grasspaper', then: [14.65]}
    #   - {if: 'paymentForm(stored_customer_certificate) == digital', then: [9.65]}
    #   - {if: 'paymentForm(stored_customer_certificate) == none', then: [7.65]}
    translations: *TRANSLATIONS-1
    slots: &SPENDE_BAEUME_SLOTS
      slot_1:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_1.title
            - component: block_content
              children:
                - component: field
                  type: radio-group
                  inline: true
                  name: stored_customer_certificate
                  # label: payment_form.stored_customer_certificate
                  formName: payment_form
                  children:
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.grasspaper
                      value: grasspaper
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.digital
                      value: digital

  # everything inherits from root
  root: &ROOT
    currencies:
      - chf
      - eur
      - usd

  chf-only: &CHF_ONLY
    currencies:
      - chf

tamaro:

  # ------------------------------ Teil I - Spenden

  rnwSpendeAuswahl: &SPENDE_AUSWAHL
    <<<1: *ROOT
    # <<<2: *DEBUGGING
    <<<3: *PRODUCTION
    recurringIntervals:
      - monthly
      # - quarterly
      # - semestral
      - yearly
    coverFeeFixed: 0.25
    coverFeePercentage: 2
    language: de
    requireSwissQrBillReferenceNumber: true
    allowedCardTypes:
      - vis # visa
      - eca # mastercard
    paymentMethods:
      - twint
      - card # credit cards
      - paypal
      # FIXME: this means 25 CHF and is not adjusted in other currencies!
      - if: amount() >= 25
        then: [ch_qr_reference]
    showBlocks:
      payment_purposes: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    purposes: [s1, s2, s3, s4, s5, s6]
    paymentTypes: [onetime, recurring]
    paymentFormPrefill:
      # by default the checkbox donation receipt is checked
      stored_customer_donation_receipt: true
      stored_customer_phone: null
    purposeDetails:
      s1:  {stored_campaign_id: '7010900000019JLAAY'}
      s2:  {stored_campaign_id: '70109000000198NAAQ'}
      s3:  {stored_campaign_id: '70109000000198SAAQ'}
      s4:  {stored_campaign_id: '70109000000198TAAQ'}
      s5:  {stored_campaign_id: '70109000000198UAAQ'}
      s6:  {stored_campaign_id: '70109000000198XAAQ'}
      s7:  {stored_campaign_id: '70109000000198cAAA'}
      s8:  {stored_campaign_id: '7010900000019AdAAI'}
      s9:  {stored_campaign_id: '70109000000198hAAA'}
      s10: {stored_campaign_id: '70109000000198YAAQ'}
      s11: {stored_campaign_id: '70109000000199QAAQ'}  # Einzelperson, andere werden im JS gesetzt
      s12: {stored_campaign_id: '70109000000198rAAA'}
      s13: {stored_campaign_id: '70109000000198tAAA'}
      s14: {stored_campaign_id: '701090000001991AAA'}
      s15: {stored_campaign_id: '701090000001996AAA'}
      s16: {stored_campaign_id: '70109000000199BAAQ'}
      s17: {stored_campaign_id: '70109000000199GAAQ'}
      s18: {stored_campaign_id: '701090000001992AAA'}
      s19: {stored_campaign_id: '7010900000019brAAA'}  # Warenbestellung
      s20: {stored_campaign_id: '701090000018ZygAAE'}  # Save The Forest Campaign
      p1:  {stored_campaign_id: '70109000000199fAAA'}  # Eigenpatenschaften
      p2:  {stored_campaign_id: '70109000000199gAAA'}
      p3:  {stored_campaign_id: '70109000000199kAAA'}
      # p4: {stored_campaign_id: '70109000000199pAAA'} # Davi
      p4:  {stored_campaign_id: '70109000001JHtbAAG'}  # Baimah
      p5:  {stored_campaign_id: '70109000000199bAAA'}
      p6:  {stored_campaign_id: '70109000000199qAAA'}
      p7:  {stored_campaign_id: '701Vj00000L8cSHIAZ'} # Jeni
      p8:  {stored_campaign_id: '701Vj00000L8d8AIAR'} # Iqo
    translations: *TRANSLATIONS-2
    showStoredCustomerBirthdate: true
    # minimumCustomAmount:
    #   - { if: 'paymentType() == onetime', then: [20] }
    #   - { if: 'paymentType() == recurring and recurringInterval() == monthly', then: [10] }
    #   - { if: 'paymentType() == recurring and recurringInterval() == quaterly', then: [30] }
    #   - { if: 'paymentType() == recurring and recurringInterval() == semestral', then: [60] }
    #   - { if: 'paymentType() == recurring and recurringInterval() == yearly', then: [120] }
    # hide it here, but add it in blocks at a different location
    showStoredCustomerDonationReceipt: false
    slots:
      # add the donation receipt field to the end of the address form
      # address_form_end:
      #   - component: field
      #     type: checkbox
      #     name: stored_customer_donation_receipt
      #     text: payment_form.stored_customer_donation_receipt
      #     formName: paymentFrom
      #     value: receipt
      profile_form_4:
        # TODO: make "optional" show up
        - component: field
          type: text
          name: stored_customer_phone
          label: payment_form.stored_customer_phone
      blocks_end:
        - component: content
          formName: payment_form
          text_html: payment_form.stored_customer_info_text_long
    # in order of appearance
    paymentValidations:
      amount:
        minimum_custom_amount: true
        maximum_custom_amount: true
      stored_customer_salutation: {required: true}
      stored_customer_firstname:  {required: true}
      stored_customer_lastname:   {required: true}
      stored_customer_email:
        # if: paymentForm(stored_customer_email_permission)
        required: true
      stored_customer_street:        {required: true}
      stored_customer_street_number: {required: true}
      stored_customer_zip_code:      {required: true}
      stored_customer_city:          {required: true}
      stored_customer_country:       {required: true}
  # /rnwSpendeAuswahl: &SPENDE_AUSWAHL

  rnwSpendeUngebunden:
    <<<: *SPENDE_AUSWAHL
    purposes: [s1]
    amounts: [50, 80, 140]

  rnwSpendeUngebundenJubilaeum:
    <<<: *SPENDE_AUSWAHL
    purposes: [s1]
    amounts: [20, 80, 200]
    purposeDetails:
      s1: {stored_campaign_id: '701Vj00000Gi4A3IAJ'}

  rnwSpendeRettungsstationen:
    <<<: *SPENDE_AUSWAHL
    purposes: [s3]

  rnwSpendeAuswilderungen:
    <<<: *SPENDE_AUSWAHL
    purposes: [s4]

  rnwSpendeBaeren:
    <<<: *SPENDE_AUSWAHL
    purposes: [s5]

  rnwSpendeWaldschutz:
    <<<: *SPENDE_AUSWAHL
    purposes: [s6]
    amounts: [40, 80, 120]

  rnwSpendeBildungsprogramm:
    <<<: *SPENDE_AUSWAHL
    purposes: [s9]

  rnwSaveTheForest: &SAVETHEFOREST
    <<<1: *SPENDE_AUSWAHL
    <<<2: *CHF_ONLY
    # newschool
    showBlocks:
      payment_purposes: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      slot_1: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
    # oldschool
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - slot_1
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    allowCustomAmount: false
    amounts: [1]
    purposes: [s20]
    paymentFormPrefill:
      stored_customer_certificate: none
      stored_recipient_firstname: ""
      stored_customer_map_label: ""
    slots:
      slot_1:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_1.title
            - component: block_content
              children:
                - component: field
                  type: radio-group
                  inline: true
                  name: stored_customer_certificate
                  # label: payment_form.stored_customer_certificate
                  formName: payment_form
                  children:
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.none
                      value: none
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.digital
                      value: digital
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_firstname
                  label: payment_form.stored_recipient_firstname
                  placeholder: payment_form.stored_recipient_firstname
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_customer_map_label
                  label: payment_form.stored_customer_map_label
                  placeholder: payment_form.stored_customer_map_label
                - component: content
                  formName: payment_form
                  text_html: payment_form.stored_customer_map_label_info_text_long
    translations: *TRANSLATIONS-3

  rnwWaldschutzMitOptionalerUrkunde:
    <<<: *SAVETHEFOREST
    amounts: [40, 80, 120, 200]
    allowCustomAmount: true
    # minimumCustomAmount: 40
    slots:
      slot_1:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_1.title
            - component: block_content
              children:
                - component: field
                  type: radio-group
                  inline: true
                  name: stored_customer_certificate
                  # label: payment_form.stored_customer_certificate
                  formName: payment_form
                  children:
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.none
                      value: none
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.digital
                      value: digital
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_firstname
                  label: payment_form.stored_recipient_firstname
                  placeholder: payment_form.stored_recipient_firstname
                - component: content
                  formName: payment_form
                  text_html: payment_form.stored_customer_map_label_info_text_long
    translations: *TRANSLATIONS-4

  rnwSpendeAuswahlNurEmail: &SPENDE_AUSWAHL_NUR_EMAIL
    # NOTE: intentionally not a deep merge, because of validations
    <<: *SPENDE_AUSWAHL
    showStoredCustomerDonationReceipt: true
    paymentFormPrefill:
      stored_customer_donation_receipt: false
      stored_customer_phone: null
    paymentValidations:
      stored_customer_salutation: { required: true }
      stored_customer_firstname:  { required: true }
      stored_customer_lastname:   { required: true }
      # NOTE: deep merge would retain the condition
      stored_customer_email:      { required: true }
      stored_customer_street: &REQUIRED_IF_DONATION_RECEIPT
        if: paymentForm(stored_customer_donation_receipt)
        required: true
      stored_customer_street_number: *REQUIRED_IF_DONATION_RECEIPT
      stored_customer_zip_code:      *REQUIRED_IF_DONATION_RECEIPT
      stored_customer_city:          *REQUIRED_IF_DONATION_RECEIPT
      stored_customer_country:       *REQUIRED_IF_DONATION_RECEIPT
    slots:
      profile_form_4:
        # TODO: make "optional" show up
        - component: field
          type: text
          name: stored_customer_phone
          label: payment_form.stored_customer_phone
      blocks_end:
        - component: content
          formName: payment_form
          text_html: payment_form.stored_customer_info_text_long

  rnwSpendeUngebundenNurEmail:
    <<<: *SPENDE_AUSWAHL_NUR_EMAIL
    purposes: [ s1 ]

  rnwSpendeFoerdermitglied:
    <<<: *SPENDE_AUSWAHL
    purposes: [ s11 ]
    amounts: [ 60, 120, 300 ]
    paymentTypes: [ onetime, recurring ]
    recurringIntervals: [ yearly ]
    allowCustomAmount: false
    translations: *TRANSLATIONS-5
    slots:
      payment_types_end:
        - component: content
          formName: payment_form
          text_html: payment_form.supscription_cancelation_policy

  rnwSpendeBaeume: &SPENDE_BAEUME
    <<<: *SPENDE_AUSWAHL
    showBlocks:
      payment_purposes: true
      slot_1: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - slot_1
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    purposes: [s7]
    paymentFormPrefill:
      stored_customer_certificate: grasspaper
    amounts: &SPENDE_BAEUME_AMOUNTS
      - if: paymentForm(stored_customer_certificate) == grasspaper
        then: [14.65, 45.25, 83.50, 198.25]
      - if: paymentForm(stored_customer_certificate) == digital
        then: [9.65, 40.25, 78.50, 193.25]
      - if: paymentForm(stored_customer_certificate) == none
        then: [7.65, 38.25, 76.50, 191.25]
    # minimumCustomAmount: &SPENDE_BAEUME_MINIMUMCUSTOMAMOUNTS
    #   - {if: 'paymentForm(stored_customer_certificate) == grasspaper', then: [14.65]}
    #   - {if: 'paymentForm(stored_customer_certificate) == digital', then: [9.65]}
    #   - {if: 'paymentForm(stored_customer_certificate) == none', then: [7.65]}
    translations: *TRANSLATIONS-6
    slots: &SPENDE_BAEUME_SLOTS
      slot_1:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_1.title
            - component: block_content
              children:
                - component: field
                  type: radio-group
                  inline: true
                  name: stored_customer_certificate
                  # label: payment_form.stored_customer_certificate
                  formName: payment_form
                  children:
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.grasspaper
                      value: grasspaper
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.digital
                      value: digital
                    - component: field
                      type: radio-in-group
                      name: stored_customer_certificate
                      text: payment_form.stored_customer_certificates.none
                      value: none

  rnwSpendeHilfspaketeAuswahl:
    <<<: *SPENDE_BAEUME
    showBlocks:
      payment_purposes: true
      slot_1: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - slot_1
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    purposes: [s13, s14, s15, s16, s17, s18]
    paymentFormPrefill:
      stored_customer_certificate: grasspaper
    amounts:
      - if: paymentForm(stored_customer_certificate) == grasspaper
        then: [27, 57, 107, 207]
      - if: paymentForm(stored_customer_certificate) == digital
        then: [22, 52, 102, 202]
      - if: paymentForm(stored_customer_certificate) == none
        then: [20, 50, 100, 200]
    # minimumCustomAmount:
    #   - {if: 'paymentForm(stored_customer_certificate) == grasspaper', then: [27]}
    #   - {if: 'paymentForm(stored_customer_certificate) == digital', then: [22]}
    #   - {if: 'paymentForm(stored_customer_certificate) == none', then: [20]}
    translations: *TRANSLATIONS-7

  rnwSpendeKondolenz: &SPENDE_KONDOLENZ
    <<<: *SPENDE_AUSWAHL
    purposes: [s10]
    paymentTypes: [onetime]
    slots:
      purposes_end:
        - component: field
          type: text
          name: stored_customer_subject
          placeholder: payment_form.stored_customer_subject_placeholder
          label: payment_form.stored_customer_subject
    paymentFormPrefill:
      stored_customer_subject: null
    translations: *TRANSLATIONS-8
    paymentValidations:
      stored_customer_subject:
        required: true

  rnwSpendeBesondereAktionen:
    <<<: *SPENDE_KONDOLENZ
    purposes: [s12]
    translations: *TRANSLATIONS-9

  # ------------------------------ Teil II - Patenschaften

  rnwPatenschaftAuswahl: &PATENSCHAFT
    <<<: *SPENDE_AUSWAHL
    showBlocks:
      payment_purposes: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    purposes: [p1, p3, p4, p5, p7, p8]
    paymentFormPrefill:
       payment_type: recurring
    recurringIntervals:
      - yearly
      - monthly
    amounts:
      - {if: 'paymentType() == onetime', then: [300]}
      - {if: 'paymentType() == recurring and recurringInterval() == monthly', then: [25]}
      - {if: 'paymentType() == recurring and recurringInterval() == yearly', then: [300]}
    # minimumCustomAmount:
    #   - {if: 'paymentType() == onetime', then: [300]}
    #   - {if: 'paymentType() == recurring and recurringInterval() == monthly', then: [25]}
    #   - {if: 'paymentType() == recurring and recurringInterval() == yearly', then: [300]}
    translations: *TRANSLATIONS-10

  rnwPatenschaftRettungsstationen:
    <<<: *PATENSCHAFT
    purposes: [p1]

  rnwPatenschaftTopan:
    <<<: *PATENSCHAFT
    purposes: [p2]

  rnwPatenschaftBumi:
    <<<: *PATENSCHAFT
    purposes: [p3]

  rnwPatenschaftDavi:
    <<<: *PATENSCHAFT
    purposes: [p4]

  rnwPatenschaftKopral:
    <<<: *PATENSCHAFT
    purposes: [p5]

  rnwPatenschaftShelton:
    <<<: *PATENSCHAFT
    purposes: [p6]

  rnwPatenschaftJeni:
    <<<: *PATENSCHAFT
    purposes: [p7]

  rnwPatenschaftIqo:
    <<<: *PATENSCHAFT
    purposes: [p8]

  # ------------------------------ Teil III - Schenken

  rnwSchenkenPatenschaftAuswahl: &PATENSCHAFT_SCHENKEN
    <<<: *PATENSCHAFT
    purposeDetails:
      # Hilfspakete
      s13: {stored_campaign_id: '7010900000019AAAAY'}
      s14: {stored_campaign_id: '7010900000019ATAAY'}
      s15: {stored_campaign_id: '7010900000019A6AAI'}
      s16: {stored_campaign_id: '7010900000019APAAY'}
      s17: {stored_campaign_id: '7010900000019A0AAI'}
      s18: {stored_campaign_id: '7010900000019ABAAY'}
      # Patenschaften
      p1:  {stored_campaign_id: '7010900000019AOAAY'}
      p2:  {stored_campaign_id: '7010900000019A4AAI'}
      p3:  {stored_campaign_id: '7010900000019A5AAI'}
      # p4:  {stored_campaign_id: '7010900000019A9AAI'}  # Davi
      p4:  {stored_campaign_id: '70109000001JHtgAAG'}  # Baimah
      p5:  {stored_campaign_id: '7010900000019AEAAY'}
      p6:  {stored_campaign_id: '7010900000019AJAAY'}
      p7:  {stored_campaign_id: '701Vj00000L8d8AIAR'}  # Jeni
      p8:  {stored_campaign_id: '701Vj00000L8XduIAF'}  # Iqo
    showBlocks:
      payment_purposes: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
      slot_4: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    #   - slot_4
    #   # - slot_2
    #   # - if: paymentForm(stored_customer_delivery) == recipient
    #   #   then: slot_3
    # gifts cannot be recurring
    paymentTypes: [ onetime ]
    paymentFormPrefill:
      stored_recipient_salutation: null
      stored_recipient_firstname: null
      stored_recipient_lastname: null
      stored_recipient_email: null
      stored_recipient_birthdate: null
      stored_recipient_street: null
      stored_recipient_street_number: null
      stored_recipient_street2: null
      stored_recipient_zip_code: null
      stored_recipient_city: null
      stored_recipient_country: null
      stored_customer_delivery: null
      # stored_sxt_communication_keywords: 1888278
    amounts: [300, 180]
    translations: *TRANSLATIONS-11
    slots:
      slot_2:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_2.title
            - component: block_content
              children:
                - component: field
                  type: radio-group
                  inline: true
                  name: stored_customer_delivery
                  # label: payment_form.stored_customer_delivery
                  formName: payment_form
                  children:
                    - component: field
                      type: radio-in-group
                      name: stored_customer_delivery
                      text: payment_form.stored_customer_deliveries.customer
                      value: customer
                    - component: field
                      type: radio-in-group
                      name: stored_customer_delivery
                      text: payment_form.stored_customer_deliveries.recipient
                      value: recipient
      slot_4:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_3.title
            - component: block_content
              children:
                - component: field
                  type: select
                  formName: payment_form
                  name: stored_recipient_salutation
                  label: payment_form.stored_recipient_salutation_label
                  placeholder: payment_form.stored_recipient_salutation_placeholder
                  options:
                    - value: mr
                      label: payment_form.salutations.mr
                    - value: ms
                      label: payment_form.salutations.ms
                    - value: neutral
                      label: payment_form.salutations.neutral
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_firstname
                  label: payment_form.stored_customer_firstname
                  placeholder: payment_form.stored_customer_firstname
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_lastname
                  label: payment_form.stored_customer_lastname
                  placeholder: payment_form.stored_customer_lastname
                - component: field
                  type: date
                  formName: payment_form
                  name: stored_recipient_birthdate
                  label: payment_form.stored_recipient_birthdate
                  placeholder: payment_form.stored_customer_birthdate
                  infoToggleTextHTML: payment_form.stored_recipient_birthdate_info_bubble_html
      slot_3:
        - component: block
          children:
            - component: block_header
              title: blocks.slot_3.title
            - component: block_content
              children:
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_email
                  label: payment_form.stored_recipient_email
                  placeholder: payment_form.stored_customer_email
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_street
                  label: payment_form.stored_customer_street
                  placeholder: payment_form.stored_customer_street
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_street_number
                  label: payment_form.stored_customer_street_number
                  placeholder: payment_form.stored_customer_street_number
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_street2
                  label: payment_form.stored_customer_street2
                  placeholder: payment_form.stored_customer_street2
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_zip_code
                  label: payment_form.stored_customer_zip_code
                  placeholder: payment_form.stored_customer_zip_code
                - component: field
                  type: text
                  formName: payment_form
                  name: stored_recipient_city
                  label: payment_form.stored_customer_city
                  placeholder: payment_form.stored_customer_city
                - component: field
                  type: select
                  formName: payment_form
                  name: stored_recipient_country
                  label: payment_form.stored_customer_country
                  placeholder: payment_form.stored_customer_country
                  # TODO: find out how to populate this with countries
                  options: null
    paymentValidations:
      # TODO: why does this not work
      stored_customer_email: {required: true}
      # stored_customer_delivery: { required: true }
      stored_recipient_salutation: &REQUIRED_IF_DELIVERY_TO_RECIPIENT
        if: paymentForm(stored_customer_delivery) == recipient
        required: true
      stored_recipient_firstname:
        required: true
      stored_recipient_lastname:
        required: true
      stored_recipient_street: *REQUIRED_IF_DELIVERY_TO_RECIPIENT
      stored_recipient_street_number: *REQUIRED_IF_DELIVERY_TO_RECIPIENT
      stored_recipient_zip_code: *REQUIRED_IF_DELIVERY_TO_RECIPIENT
      stored_recipient_city: *REQUIRED_IF_DELIVERY_TO_RECIPIENT
      stored_recipient_country: *REQUIRED_IF_DELIVERY_TO_RECIPIENT

  rnwSchenkenPatenschaftRettungsstationen:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p1]

  rnwSchenkenPatenschaftTopan:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p2]

  rnwSchenkenPatenschaftBumi:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p3]

  rnwSchenkenPatenschaftDavi:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p4]

  rnwSchenkenPatenschaftKopral:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p5]

  rnwSchenkenPatenschaftShelton:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p6]

  rnwSchenkenPatenschaftJeni:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p7]

  rnwSchenkenPatenschaftIqo:
    <<<: *PATENSCHAFT_SCHENKEN
    purposes: [p8]

  rnwSchenkenHilfspaketeAuswahl:
    <<<1: *PATENSCHAFT_SCHENKEN
    <<<2: *TWO-OPTIONS-CERTIFICATE
    purposes: [s13, s14, s15, s16, s17, s18]
    amounts:
      - if: paymentForm(stored_customer_certificate) == grasspaper
        then: [27, 57, 107, 207]
      - if: paymentForm(stored_customer_certificate) == digital
        then: [22, 52, 102, 202]
      - if: paymentForm(stored_customer_certificate) == none
        then: [20, 50, 100, 200]
    # minimumCustomAmount:
    #   - {if: 'paymentForm(stored_customer_certificate) == grasspaper', then: [27]}
    #   - {if: 'paymentForm(stored_customer_certificate) == digital', then: [22]}
    #   - {if: 'paymentForm(stored_customer_certificate) == none', then: [20]}
    showBlocks:
      payment_purposes: true
      slot_1: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
      slot_4: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - slot_1
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    #   - slot_4
    #   # - slot_2
    #   # - if: paymentForm(stored_customer_delivery) == recipient
    #   #   then: slot_3
    translations: *TRANSLATIONS-12

  # ------------------------------ Teil IV - Bäume schenken

  rnwSchenkenBaeume:
    <<<1: *PATENSCHAFT_SCHENKEN
    <<<2: *TWO-OPTIONS-CERTIFICATE
    purposes: [s8]

    showBlocks:
      payment_purposes: true
      slot_1: true
      payment_amounts_and_intervals: true
      payment_cover_fee: true
      payment_payment_methods: true
      payment_profile: true
      payment_address: true
      slot_4: true
    # paymentWidgetBlocks:
    #   - payment_purposes
    #   - slot_1
    #   - payment_amounts_and_intervals
    #   - payment_cover_fee
    #   - payment_payment_methods
    #   - payment_profile
    #   - payment_address
    #   - slot_4
    #   # - slot_2
    #   # - if: paymentForm(stored_customer_delivery) == recipient
    #   #   then: slot_3
    # amounts: *SPENDE_BAEUME_AMOUNTS
    # minimumCustomAmount: *SPENDE_BAEUME_MINIMUMCUSTOMAMOUNTS
    translations: *TRANSLATIONS-13

  # ------------------------------ Teil V - Verschiedenes

  rnwWarenBestellung:
    <<<1: *SPENDE_AUSWAHL
    <<<2: *CHF_ONLY
    purposes: [ s19 ]
    paymentTypes: [ onetime ]
    amounts: []
    translations: *TRANSLATIONS-14

# Goodbye and good night. EOF
